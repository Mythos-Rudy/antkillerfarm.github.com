---
layout: post
title:  Hbase
category: AI 
---

* toc
{:toc}

# Hbase

官网：

http://hbase.apache.org/

快速开始：

http://hbase.apache.org/book.html#quickstart

启动脚本：

1.HDFS

`sbin/start-dfs.sh`

2.Hbase

`bin/start-hbase.sh`

参考：

http://www.cnblogs.com/cenyuhai/

这个blog专注于hadoop、hbase、spark。

http://www.cnblogs.com/nexiyi/p/hbase_shell.html

HBase的常用Shell命令

http://www.cnblogs.com/Dreama/articles/2219190.html

Hadoop+HBase伪分布式安装配置

https://sourceforge.net/projects/haredbhbaseclie/

HareDB HBase Client是一个Hbase的Web GUI客户端，比较好用。

## 基本概念

HBase以表的形式存储数据。表有行和列组成。列划分为若干个列族/列簇(column family)。

<table>
<tr>
<td rowspan="2"><strong>Row Key</strong></td>
<td colspan="2"><strong>column-family1</strong></td>
<td colspan="3"><strong>column-family2</strong></td>
<td><strong>column-family3</strong></td></tr>
<tr>
<td><strong>column1</strong></td>
<td><strong>column2</strong></td>
<td><strong>column1</strong></td>
<td><strong>column2</strong></td>
<td><strong>column3</strong></td>
<td><strong>column1</strong></td></tr>
<tr>
<td><strong>key1</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td></tr>
<tr>
<td><strong>key2</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td></tr>
<tr>
<td><strong>key3</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td></tr></table>

如上图所示，key1,key2,key3是三条记录的唯一的row key值，column-family1,column-family2,column-family3是三个列族，每个列族下又包括几列。比如，column-family1这个列族下包括两列，名字是column1和column2。

HBase中，将一个Column Family中的列存在一起，而不同Column Family的数据则分开。

不要在一张表里定义太多的column family。目前Hbase并不能很好的处理超过2~3个column family的表。因为某个column family在flush的时候，它邻近的column family也会因关联效应被触发flush，最终导致系统产生更多的I/O。

吐槽一下。既然2~3个column family的表都支持的不好，那么似乎表明column family在现阶段只是一个设计的概念，离实用尚有距离。这样做的用意，大概是期待有一天Hbase把这个特性做好之后，上层应用可以无须修改吧。

参考：

https://mp.weixin.qq.com/s/ElmuT_Z2UIavFKUlSM7rZw

HBase RowKey与索引设计

## HBase架构

![](/images/article/hbase.jpg)

HBase在物理上是HDFS上的文件，因此它也是主从结构的。

## 常用的HBase Shell命令

这些命令可在hbase的控制台输入。进入控制台：

`bin/hbase shell`

| 名称 | 命令表达式 |
|:--|:--|
| 查看当前用户 | whoami |
| 创建表 | create '表名称', '列名称1','列名称2','列名称N' |
| 添加记录 | put '表名称', '行名称', '列名称:', '值' |
| 查看记录 | get '表名称', '行名称' |
| 查看表中的记录总数 | count  '表名称' |
| 删除记录 | delete  '表名' ,'行名称' , '列名称' |
| 删除一张表 | 先要禁用该表，才能对该表进行删除，第一步 disable '表名称' 第二步  drop '表名称' |
| 查看所有记录 | scan "表名称" |
| 查看某个表某个列中所有数据 | scan "表名称" , ['列名称:'] |
| 更新记录 | 就是重写一遍进行覆盖 |

## 二级索引

原生态的HBase由于是按列存储的key-value对，原则上只能通过key查询value，因此无法创建主键之外的索引。然而，二级索引在当前的数据应用中，已经相当普遍了。如何解决这一问题呢？

**方法一**：将需要创建键的若干列的内容放到key中。比如，某数据表需要对日期和地点建索引，则key的值可以写成“2017-北京”这样的形式。

这个方法的缺点在于，放入key中的列相当于是行存储结构，会降低查询效率。设想一下，如果所有列都放到key中，那么实际上这个数据表就退化成了普通的按行存储的关系数据库了。

一般来说，采用方法一的数据表其key中包含的列数不应超过10个。

**方法二**：外挂二级索引库。目前主要实现的方案有ITHBase，IHBase，CCIndex，华为二级索引和360二级索引等。这些方案的实现细节虽有差异，但原理上都差不多，即：在数据本身之外，创建专门的数据结构用于存放二级索引。

细节可参考：

http://blog.csdn.net/dhtx_wzgl/article/details/49423979

HBase学习之二级索引

## OpenTSDB

OpenTSDB（Time Series Database）是一个基于HBase的存放时序数据的数据库。

官网：

http://opentsdb.net/

DB这个词很有误导性，其实它并不是一个db，单独一个OpenTSDB无法存储任何数据，它只是一层数据读写的服务，更准确的说它只是建立在Hbase上的一层数据读写的服务。

HBase在使用上的一个难点就是如何根据业务的特点，设计键值和索引。OpenTSDB就是这方面的一个实践。

参考：

https://mp.weixin.qq.com/s/GApmeXGbjRTnhullArlkYg

小米正用时序数据库，解决这个“硬核”问题

## 参考

https://mp.weixin.qq.com/s/ucQgmb1NkdyfAw6wDTyWYg

阿里HBase又放出了哪些大招？

https://mp.weixin.qq.com/s/BICJgyv2Y8r0j5Jjw6weRw

大数据查询——HBase读写设计与实践

https://blog.csdn.net/odailidong/article/details/41794403

Hbase万亿级存储性能优化总结

https://mp.weixin.qq.com/s/kJbeuu3zqRxQxVN38Z4asA

​你应该知道的HBase基础，都在这儿了

https://mp.weixin.qq.com/s/Bl1NT-pgSseImLEd9f6xzA

Apache HBase的现状和发展

https://mp.weixin.qq.com/s/xWNSI9jZVIYaGxdBsSB8gw

快手HBase在千亿级用户特征数据分析中的应用与实践

https://mp.weixin.qq.com/s/pQbsGxM59fgQMYH54ETk7Q

面试集锦-HBase

https://mp.weixin.qq.com/s/vyF0VAF8xjEWrBnS1_DtkA

用HBase做高性能键值查询？

# Python++

https://mp.weixin.qq.com/s/Bllw4rSkxd378LLUCh6oJA

Python炫技操作：合并字典的七种方法

https://mp.weixin.qq.com/s/KrdXyYMtyElUGuPH5eNYvg

Python的深浅拷贝讲解

https://mp.weixin.qq.com/s/DMK3gwMKbpsfOrWMxjb5lg

不到20行代码，用Python做一个智能聊天机器人

https://mp.weixin.qq.com/s/wIXCIMzZmh75SV-qJIKbCw

Python程序员最常犯的10个错误，你中招了吗？

https://mp.weixin.qq.com/s/W1j4G_QQqlzDYru231dZFA

Python：编写条件分支代码的技巧

https://mp.weixin.qq.com/s/ST7TQ5Wkn_owv5bpTiTKVA

2018年最好用的5个python网站开发框架

https://mp.weixin.qq.com/s/dmJI2GlzgUJgYllfVOPt4g

两句话轻松掌握Python最难知识点

https://mp.weixin.qq.com/s/PkzD1ig_D5AIUTkO5zH8pQ

Python字节码介绍

https://mp.weixin.qq.com/s/_ZvF6jK5Jo4rFGwHvEoAig

一文读懂Python装饰器由来

https://mp.weixin.qq.com/s/RdnAQPAn9E8qDvtnCEgcKw

Tkinter可视化窗口

https://mp.weixin.qq.com/s/-erFsz8NvLZ5mOIXyDosFg

使用PyInstaller将python转成可执行文件exe笔记

https://mp.weixin.qq.com/s/EZh5PAUgXkIDzGbim6wqLQ

用Python带你看白雪飘扬~

https://mp.weixin.qq.com/s/SUyRNz_M7B6bcdV7-YxlZQ

Python制作一款简易音乐播放器

https://mp.weixin.qq.com/s/d2_MTvfbOFZmppej5UOwUw

关于使用Python析构函数的正确姿势

https://mp.weixin.qq.com/s/_PtdgGElw0mvr_rRm5xrCg

Python性能优化的20条招数

https://mp.weixin.qq.com/s/0Rpbuo7LCRo1SnbE8NcH4Q

快速学习Python的全套14张思维导图

https://mp.weixin.qq.com/s/Cujl2nxITCuZL7B72uKVrQ

为什么Python这么慢？

https://mp.weixin.qq.com/s/a3YTmQMfpnviHnidXrhYtg

这17个骚操作你都Ok吗

https://zhuanlan.zhihu.com/p/41293278

把python翻译成C++

https://mp.weixin.qq.com/s/XV4LOBM1pO0N8oShZl7MzQ

手把手教你用Python设计一个命令行界面

https://mp.weixin.qq.com/s/b19SLduKoiOIeE5CA3ZOjg

Python标准库之LRU缓存实现学习

https://mp.weixin.qq.com/s/zABXQksUX6le8zWJeWUQXw

Python的`__name__`变量，到底是个什么东西？

https://mp.weixin.qq.com/s/FtlAkInyXgvUxDnSCikTIw

全面深入理解Python面向对象编程

https://blog.csdn.net/lys_828/article/details/106489371

字符串模糊匹配及在实战中的应用（FuzzyWuzzy库）

https://mp.weixin.qq.com/s/Ln5EPqbdNjy3HrVM7Wwe2g

Heartrate：一个牛逼的工具，Python执行实时可视化

https://mp.weixin.qq.com/s/J8IHOdUevyn9YS09D8Ou-g

聊聊Python发送邮件的几种方式

https://mp.weixin.qq.com/s/L0FoYh1npy-3rwRQWcj71g

五大自动化测试的Python框架

https://mp.weixin.qq.com/s/Oq316PWN10FBWzv-X26pAg

高性能Python CPU Memery分析器
