---
layout: post
title:  Win10/11历险记, Kannel, ZeroC ICE, 分布式ID生成器
category: technology 
---

* toc
{:toc}

# Win10/11历险记

2015.8

我大概在4、5月间，听说了Win10免费升级的消息。于是一直很期待7月29日的到来。果然到了29日当天下午的时候，公司电脑就收到了升级的通知。然而由于网速不给力，当天并未对公司电脑进行升级。倒是晚上在家里的电脑上，虽然耗时2小时，但却一路顺利的升级成功。

Win10给人的第一感觉，其实和Win8差不多，只不过加了个更像Win7的开始菜单而已。不过既来之则安之，一段时间用下来，总算还是要比Win7强不少的。

又过了几天，公司的电脑也升级成功。正得意间，忽然发现VirtualBox在Win10下工作不正常。查了VirtualBox官网方知，其目前尚不支持Win10 Host。于是不得不重新降级到Win7。看来尝鲜也是有得有失的。对于工作用的电脑，有的时候够用就好，没必要什么都求新的。

2020.11

由于硬盘出了些故障，原来在备份分区准备着的Ghost镜像，恢复系统失败，不得不使用U盘启动并重装系统。

除非是从Win7升级，否则Win10强制要求硬盘是UEFI启动的。修改硬盘分区格式的方法如下：

https://docs.microsoft.com/zh-cn/windows-server/storage/disk-management/change-an-mbr-disk-into-a-gpt-disk

将MBR磁盘转换为GPT磁盘

应该说这次U盘安装Win10的体验还是不错的。MS官方提供了相关工具（Windows PE），一切都是傻瓜操作。不像早期的光盘安装，还要注意启动盘和数据盘的差异。当然U盘其实也存在这两者的差异问题，不过工具已经帮你处理好了。

这样一来，光盘确实是没啥用了，即使我的第一台PC的光驱，实际使用也不过数十次，更多的主要是用于重装系统，如今连这也用不着了。

最后，吐槽一下系统的体积，Win10启动需要8G以上的U盘，DVD看来也不够用了。

2021.11

最近电脑更新了Win11，升级顺利，暂时无感。

# Kannel

Kannel是一个开源的WAP&SMS网关项目。

官网：

http://www.kannel.org/

这里提到这个项目，并非它有多么重要——实际上它从2010年之后就几乎没有更新了，最新的版本定格在2014年。它所代表的WAP已经无人问津，至于SMS吧，似乎又用不到这么复杂的框架。

但我之所以要提它，主要在于情怀。2007年底的时候，公司给我安排了一个在App中集成彩信发送功能的任务。当时由于能力尚浅，虽然努力了一个月，最终却没有实际成果，很是让领导质疑了一阵，幸好接手的哥们同样做不出来，而我的下一个任务——使用jpeglib，获得了成功，才算将事情平息下来。

过了一年，闲暇无聊之际，旧事重提，于是发现了Kannel，并做了一个demo。可惜公司时局变化，这一切都变得无足轻重了。

# ZeroC ICE

我在研究生时代，研究过CORBA、EJB、COM这样的中间件技术。然而工作以后，再没有机会使用。平时偶尔关注，也只是晓得CORBA从来没有流行过，EJB在Struts、Hibernate、Spring等框架的围攻下，用者寥寥。直到最近，因为项目需要接触到ZeroC的ICE框架。

ICE框架的官网地址：

https://zeroc.com/downloads/ice

安装：

```bash
wget https://zeroc.com/download/GPG-KEY-zeroc-release
sudo apt-key add GPG-KEY-zeroc-release
sudo apt-add-repository "deb http://zeroc.com/download/apt/ubuntu16.04 stable main"
sudo apt update
sudo apt install zeroc-ice-all-runtime zeroc-ice-all-dev
sudo apt install libssl-dev
pip install zeroc-ice
```

多语言demo：

https://github.com/zeroc-ice/ice-demos

注意demo的master分支是开发分支，好多代码都是有问题的，请切换到正在使用版本的分支，例如：

`git checkout 3.6`

---

2022.7

和CORBA竞争的MS的DCOM也好不到哪里去。唯一用的多的，主要在工控领域。

OPC DA在其发展时，建立在当时的Windows技术：OLE、ActiveX、COM/DCOM 之上。但此后行业发生了变化，其他操作系统和技术也开始流行。

COM是微软投入C++门下后给C++打的一个超大补丁用来解决C++的ABI没有标准的问题。

https://zhuanlan.zhihu.com/p/426818530

聊聊越来越火的OPC DA OPC UA的标准

https://www.zhihu.com/question/19998748

COM过时了吗？它的应用前景究竟如何？

https://www.zhihu.com/question/49433640

怎么通俗的解释COM组件？

# Hprose

Hprose是ZeroC ICE的一个竞争者，由国内某高手打造，支持的语言超过20种，堪称最全。不过貌似没什么大公司用啊。。。

其标榜的无需生成桩代码的优点，相比ZeroC ICE的老版本来说，的确是个进步。但目前的ZeroC ICE 3.6版本，也同样提供了类似的功能。这或者也是Hprose一直火不起来的原因。

官网：

http://hprose.com/

Github：

https://github.com/hprose

# 分布式ID生成器

![](/images/img3/Snow.png)

这种结构是雪花算法提出者Twitter的分法。百度的UidGenerator、美团的Leaf等，都是基于雪花算法做一些适合自身业务的变化。

参考：

http://mp.weixin.qq.com/s/Bk5k6vRG4Rq4iCtmtYDEGQ

Leaf——美团点评分布式ID生成系统

https://mp.weixin.qq.com/s/6J7n3udEyQvUHRHwvALNYw

Leaf：美团分布式ID生成服务开源

https://mp.weixin.qq.com/s/_z0-90xbsCd4Pdi6UlEvnA

分布式ID生成器

https://mp.weixin.qq.com/s/Yk2ZlGCEINGrsTfHI6zpsw

分布式id生成器

https://mp.weixin.qq.com/s/E3PGP6FDBFUcghYfpe6vsg

唯一ID生成算法剖析

https://mp.weixin.qq.com/s/ZbZRMFjbl5oG8yncv8hCtQ

认识“雪花ID”：如何在分布式环境中大规模生成唯一ID？  

https://mp.weixin.qq.com/s/F7WTNeC3OUr76sZARtqRjw

分布式架构系统生成全局唯一序列号的一个思路

# 苏俄+

德纳尔被俘之后，接受了法国的军事审判。几乎所有人都以为他会因此受到惩罚，然而却并非如此。直到此时，大家这才恍然大悟，原来德纳尔与法国政府的关系并非表面看上去的样子，德纳尔就像是法国在殖民地的影子一样。在德纳尔死的时候，法国悲伤地认为“法国第一雇佣兵死了”。

瓦格纳集团以前是被普京收编了的光头党组织，然后开始境外发展。俄乌战争以前就是俄国在中东与非洲扩展与维持势力范围的马前卒。有点儿像法国德纳尔集团以及美国以前的平克顿侦探社，白手套武装组织，专替普京和俄军干黑活儿的。

战前他们是跑到其他国家，现在他们是从其他国家拉壮丁回俄国参加侵乌战争。

https://www.sohu.com/a/549791570_121136722

德纳尔：退伍兵组建雇佣兵团，纵横多年还控制一个小国，安享晚年

---

亚美尼亚有一个马米科尼扬家族，自称祖上是“中国”（Chem国）某个王子马姆贡的后裔，因为和兄弟争皇位失败 润到了萨珊波斯，因为出身高贵，受到了波斯皇帝的重用，后来“中国”皇帝派出追兵，要求波斯交出这个人，波斯人不想交人，也不敢得罪“中国”，就把这人继续往西润，润到了亚美尼亚当总督。

他的后代马米科尼扬家族成为当地的旺族，统治亚美尼亚四百多年，率领国家抵抗外族的压迫，近代民族主义兴起后，他们又被塑造成亚美尼亚民族英雄。

现在唯一的问题是中国这边在对应的时间线上，根本找不到这个所谓的王子。。。

https://www.zhihu.com/question/527847806

如果我一个黑发黑瞳穿越到中世纪欧洲，如何冒充贵族跻身上流社会?

---

面包和盐是一种斯拉夫人的欢迎客人的习俗。在斯拉夫人的传统文化中，“面包和盐”是最隆重的一种礼节，用来欢迎“重要、尊敬和钦佩的客人”。

---

安德烈·德米特里耶维奇·萨哈罗夫，1921～1989，苏联氢弹之父，曾主导苏联第一枚氢弹的研发。曾提出兴建一个受控核聚变反应堆——托卡马克。人权运动家，公民自由的拥护者，支持苏联改革。他在1975年获得诺贝尔和平奖。

---

https://mp.weixin.qq.com/s/kCLZyjoDoNK-py06hvmujA

特供商店在苏联的兴衰（上）

https://mp.weixin.qq.com/s/C2DIOcL9pE-FWspAt8Ut_Q

特供商店在苏联的兴衰（下）

https://www.zhihu.com/question/21817255

俄罗斯（苏联）作为一个工业大国，为什么没有世界性的汽车品牌？

https://zhuanlan.zhihu.com/p/331709823

苏联人给他发的奖章，比给勃列日涅夫还多

https://zhuanlan.zhihu.com/p/390097908

乌兹别克棉花案：苏联解体的潘多拉魔盒之钥

https://mp.weixin.qq.com/s/M3ZselQLqCdLY53dpqILLA

穿越回苏联：火红岁月的情与色（上）

https://mp.weixin.qq.com/s/2TAWe4frnI6RTpe4ui0mAg

穿越回苏联：火红岁月的情与色（下）

https://mp.weixin.qq.com/s/YPgFtLkpl9BGNZPo_IEcrg

《功勋》孙家栋单元的中苏军服细节看不清？来看特写和解析

https://www.zhihu.com/question/498827834

苏联拖拉机为什么没有解决农业问题？

https://www.zhihu.com/question/22972794

没有出海口的黑海舰队对俄罗斯的意义是什么？

http://www.mofcom.gov.cn/article/i/jyjl/e/201909/20190902900697.shtml

毕马威：哈萨克斯坦一半财富集中在162人之手

https://www.zhihu.com/question/321165966

如何看待演员泽连斯基2019年乌克兰大选高票当选乌克兰总统？

https://zhuanlan.zhihu.com/p/352232012

他，就是那个在厦门肉食公司门口抱摔春丽的大肌霸
