---
layout: post
title:  机器学习（十九）——关联规则挖掘（1）
category: ML 
---

* toc
{:toc}

# 关联规则挖掘

## 基本概念

关联规则挖掘（Association rule mining）是机器学习的一个子领域。它最早的案例就是以下的**尿布和啤酒**的故事：

>沃尔玛曾今对数据仓库中一年多的原始交易数据进行了详细的分析，发现与尿布一起被购买最多的商品竟然是啤酒。   
>借助数据仓库和关联规则，发现了这个隐藏在背后的事实：**美国妇女经常会嘱咐丈夫下班后为孩子买尿布，而30%~40%的丈夫在买完尿布之后又要顺便购买自己爱喝的啤酒。**   
>根据这个发现，沃尔玛调整了货架的位置，把尿布和啤酒放在一起销售，大大增加了销量。

这里借用一个引例来介绍关联规则挖掘的基本概念。

| 交易号TID | 顾客购买的商品 | 交易号TID | 顾客购买的商品 |
|:--:|:--|:--:|:--|
| T1 | bread, cream, milk, tea | T6 | bread, tea |
| T2 | bread, cream, milk | T7 | beer, milk, tea |
| T3 | cake, milk | T8 | bread, tea |
| T4 | milk, tea | T9 | bread, cream, milk, tea |
| T5 | bread, cake, milk | T10 | bread, milk, tea |

**定义一**：设$$I=\{i_1,i_2,\dots,i_m\}$$，是m个不同的项目的集合，每个$$i_k$$称为一个**项目**。项目的集合I称为**项集**。其元素的个数称为项集的长度，长度为k的项集称为k-项集。引例中每个商品就是一个项目，项集为$$I=\{bread, beer, cake,cream, milk, tea\}$$，I的长度为6。

**定义二**：每笔**交易T**是项集I的一个子集。对应每一个交易有一个唯一标识交易号，记作TID。交易全体构成了**交易数据库D**，$$\mid D\mid$$等于D中交易的个数。引例中包含10笔交易，因此$$\mid D\mid=10$$。

**定义三**：对于项集X，设定$$count(X\subseteq T)$$为交易集D中包含X的交易的数量，则项集X的**支持度**为：

$$support(X)=\frac{count(X\subseteq T)}{\mid D\mid }$$

引例中$$X=\{bread, milk\}$$出现在T1，T2，T5，T9和T10中，所以支持度为0.5。

**定义四**：**最小支持度**是项集的最小支持阀值，记为$$SUP_{min}$$，代表了用户关心的关联规则的最低重要性。支持度不小于$$SUP_{min}$$的项集称为频繁集，长度为k的频繁集称为k-频繁集。如果设定$$SUP_{min}$$为0.3，引例中$$\{bread, milk\}$$的支持度是0.5，所以是2-频繁集。

**定义五**：**关联规则**是一个蕴含式：

$$R：X\Rightarrow Y$$

其中$$X\subset I$$，$$Y\subset I$$，并且$$X\cap Y=\varnothing$$。表示项集X在某一交易中出现，则导致Y以某一概率也会出现。用户关心的关联规则，可以用两个标准来衡量：支持度和可信度。

**定义六**：关联规则R的**支持度**是交易集同时包含X和Y的交易数与$$\mid D\mid$$之比。即：

$$support(X\Rightarrow Y)=\frac{count(X\cap Y)}{\mid D\mid }$$

支持度反映了X、Y同时出现的概率。关联规则的支持度等于频繁集的支持度。

**定义七**：对于关联规则R，**可信度**是指包含X和Y的交易数与包含X的交易数之比。即：

$$confidence(X\Rightarrow Y)=\frac{support(X\Rightarrow Y)}{support(X)}$$

可信度反映了如果交易中包含X，则交易包含Y的概率。一般来说，只有支持度和可信度较高的关联规则才是用户感兴趣的。

**定义八**：设定关联规则的最小支持度和最小可信度为$$SUP_{min}$$和$$CONF_{min}$$。规则R的支持度和可信度均不小于$$SUP_{min}$$和$$CONF_{min}$$，则称为**强关联规则**。关联规则挖掘的目的就是找出强关联规则，从而指导商家的决策。

这八个定义包含了关联规则相关的几个重要基本概念，关联规则挖掘主要有两个问题：

1.找出交易数据库中所有大于或等于用户指定的最小支持度的频繁项集。

2.利用频繁项集生成所需要的关联规则，根据用户设定的最小可信度筛选出强关联规则。

其中，步骤1是关联规则挖掘算法的难点，下文介绍的Apriori算法和FP-growth算法，都是解决步骤1问题的算法。

参考：

http://blog.csdn.net/OpenNaive/article/details/7047823

关联规则挖掘（一）：基本概念

# 美帝暴行录+

美国医生就是厉害！

在佛罗里达亲自谋划，雇佣了一帮哥伦比亚保镖，然后亲自率领前往海地，三下五除二干掉了一国总统，然后就准备登基了……

https://www.sohu.com/a/477094814_374379

刺杀海地总统

https://www.sohu.com/a/477294472_162522

直接操纵大选，奴役当地人民，美海军陆战队曾占领海地19年

---

在当地，一公升的可口可乐价格是10墨西哥比索（约合人民币3.07元），而一公升的饮用水是14墨西哥比索（约合人民币4.3元）。能放心采用的水源大头都给了工厂，而且价格相当便宜。

饮料工厂可以获得113万公升的水用作生产，超出部分价格也远低于市场价。这样做的后果，就是所有的水源都被财团买下，百姓想喝水用水，不得不去黑市采购，甚至是用井水。

https://mp.weixin.qq.com/s/fgWDkJQjA42X6S9fAp9tFQ

每天喝9罐快乐水，连续喝365天年后人会变成什么样？

---

各国一般都会规定献血浆次数。在英国，一人一年被允许捐献血浆24次，中国是26次。而在美国，是104次。

美国的上限其实就是不封顶，有也相当于没有。因为没人能一年捐百来次后，还能活蹦乱跳。但美国血浆公司不管这些，他们鼓动更多的墨西哥人卖血，甚至还搞起了促销活动。第一次卖血的人会被告知，如果这个月能连续卖血，就能拿到高达400美元的奖金。

https://zhuanlan.zhihu.com/p/458393044

美国，吸墨西哥人的血

---

其实早在上世纪60-70年代，CIA就不亲自指挥“颜革”了，原因是和谍战片里演的不同，各种精心策划的行动计划绝大多数情况下都失败了，猪肉没吃到还惹了一身骚。那之后，就把这些工作外包给各种有活力的民间与学术团体了，各有分工各有用途，平时都是自行发展。

由于机构数量众多，大多数已经形成了独立运作的能力，尤其是特朗普上台后曾经掐断过大多经费来源，加之拜登上台后呼吁（忽悠）大家自费搞“颜革”，导致“颜革”技术大范围扩散，而且“颜革”组织更加依靠各个地方的本土势力与资金支持，这也就导致了很多“颜革”活动领先于美国外交政策的“尾巴摇狗”现象。

最典型的是2020年白俄罗斯爆发的颜色革命，背后主持者是波兰和立陶宛、拉脱维亚这几个国家，特朗普主政的美国压根对这事不感兴趣，不但导致后继无力，还把刚刚和俄罗斯产生重大分歧的卢卡申科重新推到了普京的怀里。

---

美军让叛徒挖战俘的心脏和割战俘的肉，并让战俘们分而食之;把消防水龙头插进战俘的肛门，一桶桶凉水把他们的肚子涨得溜圆，慢慢地，战俘们连叫的力气也没有了；还用高分贝噪音、强光束照射、超强微波刺激等“高科技刑罚”残酷折磨战俘。

志愿军被俘人员胡祖银等人告诉英国《工人日报》记者阿兰魏宁顿和法国《人道报》记者贝却迪：敌人借故他们身上有轻伤，就将他们的四肢切掉——据统计，被俘的约3000名志愿军战俘中，有约80%被美军以受伤的借口截肢，其中有一人甚至被截去了四肢。

美军还派一些神父、牧师来“传教”，给志愿军战俘“洗脑”，在他们身上刺上“反共”等字，使他们远离“共产主义魔鬼”。对不屈服的战俘实施罚爬、罚跪、吊打、往肛门里灌辣椒水，甚至裸体塞进装了玻璃渣的汽油桶里在地上乱滚等残酷刑罚。

https://www.zhihu.com/answer/2332684517

美军虐待志愿军战俘

---

反战不反美，都是缺德鬼。

---

韩国政府有些难堪既然宣布了取缔了非法性交易有些词就不好说出口只得将这些从事性交易妇女改称为“洋公主”或“美韩民间外交官”。

令韩国政府尴尬的是为了调查这些“洋公主”具体数量政府要求其登记注册。可具体数字让人吓一跳：登记在册的“洋公主”居然有2万人而当时驻韩美军才6万人。

1992年，驻韩美军奸杀一名韩国妇女的事件中，这名美国士兵把酒瓶插入受害者的下体，并在她的肛门里插入把雨伞，还在尸体和周围撒上了洗衣粉。

---

2017年，美军轰炸了叙利亚最大水坝——幼发拉底河上的“塔卜卡大坝”，险些造成数万名叙利亚平民死亡。而美国军方则予以否认，并将“锅”甩给了极端组织IS。

直到美国人自己都看不下去了，纽约时报亲自下场把美军曝光了……

---

霓虹灯下的哨兵：

在刚刚获得解放的上海，一个美国人驾车闯入南京路上庆祝解放的游行队伍，被群众拦下后还口出狂言，“我们美国人在全世界都是畅通无阻的！”八连的执勤哨兵赵大大要把他押送到军事管制委员会处理，一位西装革履的“眼镜先生”急忙出来打圆场，于是引发一场小小的街头争论。

天塌下来有我们工人顶着！

在开始拍摄前，周总理请前线话剧团《霓虹灯下的哨兵》剧组的主创人员吃饭，强调政府很重视这部电影的拍摄，国产胶片不稳定，所以给他们用的是伊斯曼胶片，一艘远洋货轮的农产品只能换回一小舱这样的胶片，鼓励大家好好拍。
